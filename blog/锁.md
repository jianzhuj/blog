redis 已读未读
本地消息表
redision redisTemlplate 共享redis连接池问题
cas的ABA问题(  线程A将一个变量从a改为b，线程B又将变量改为a，称为ABA问题，解决办法：加一个version  每次更新 version值加一 。通过version来判断 值是否被修改过)
mysql 实现乐观锁 （表加一个version字段， 每次update version加一   update时加上where version = 查出来的值   如果这次update影响的行数为0，代表在这个线程查询version到update
操作的过程中有其他线程修改了这条记录，如果影响行数为0 ，就重新查version update时加上version条件 重试  类似于cas）