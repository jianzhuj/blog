一般配合jenkins使用

```shell
#!/bin/bash

export jvmarg="-Xmx1g -Xms512m"

export gateway=*****.jar
export auth=*****.jar
export base=*****.jar
export order=*****.jar
export system=*****.jar

services=(
$gateway 
$auth 
$base 
$order 
$system 
)

#for service in ${services[@]}
#do
echo "停止服务"
ps -ef | grep $gateway | grep -v grep | awk '{print $2}' | xargs -r  kill -9
ps -ef | grep $auth  | grep -v grep | awk '{print $2}' | xargs -r  kill -9
ps -ef | grep $base | grep -v grep | awk '{print $2}' | xargs -r  kill -9
ps -ef | grep $order  | grep -v grep | awk '{print $2}' | xargs -r  kill -9
ps -ef | grep $system | grep -v grep | awk '{print $2}' | xargs -r  kill -9
sleep 1s

echo "删除jar&log"
rm -rf /**.jar
rm -rf /**.jar
rm -rf /**.jar
rm -rf /**.jar
rm -rf /**.jar

echo "复制jar"
cp -r /server/remote/*.jar /server/demo/
sleep 3s

cd /server/demo

echo "启动服务$service"
nohup java $jvmarg -Dspring.profiles.active=test -jar $gateway > /dev/null 2>&1 &
nohup java $jvmarg -Dspring.profiles.active=test -jar $auth > /dev/null 2>&1 &
nohup java $jvmarg -Dspring.profiles.active=test -jar $base > /dev/null 2>&1 &
nohup java $jvmarg -Dspring.profiles.active=test -jar $order > /dev/null 2>&1 &
nohup java $jvmarg -Dspring.profiles.active=test -jar $system > /dev/null 2>&1 &
sleep 5s
#done

#echo done

```

执行单独jar包

```shell
cd `dirname $0`
#export JAVA_HOME=/usr/java/jdk1.8.0_191
#export CLASSPATH=.:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar
#export PATH=${JAVA_HOME}/bin:$PATH
CUR_SHELL_DIR=`pwd`
CUR_SHELL_NAME=`basename ${BASH_SOURCE}`
#修改这里jar包名即可
JAR_NAME="demo.jar"
JAR_PATH=$CUR_SHELL_DIR/$JAR_NAME
#JAVA_MEM_OPTS=" -server -Xms1024m -Xmx1024m -XX:PermSize=128m"
JAVA_MEM_OPTS=""
#LOADER_PATH="-Dloader.path=lib"
LOADER_PATH=""
SPRING_PROFILES_ACTIV="-Dspring.profiles.active=prod"
#SPRING_PROFILES_ACTIV=""
LOG_DIR=$CUR_SHELL_DIR/logs
LOG_PATH=$LOG_DIR/${JAR_NAME}.log
echo_help()
{
  echo -e "syntax: sh $CUR_SHELL_NAME start|stop"
}
if [ -z $1 ];then
  echo_help
  exit 1
fi
if [ ! -d "$LOG_DIR" ];then
  mkdir "$LOG_DIR"
fi
if [ ! -f "$LOG_PATH" ];then
  touch "$LOG_DIR"
fi
if [ "$1" == "start" ];then
# check server
  PIDS=`ps --no-heading -C java -f --width 1000 | grep $JAR_NAME | awk '{print $2}'`
  if [ -n "$PIDS" ]; then
    echo -e "ERROR: The $JAR_NAME already started and the PID is ${PIDS}."
    exit 1
  fi
echo "Starting the $JAR_NAME..."
  
  # start
  nohup java $JAVA_MEM_OPTS $LOADER_PATH -jar $SPRING_PROFILES_ACTIV $JAR_PATH >> $LOG_PATH 2>&1 &
  
  COUNT=0
  while [ $COUNT -lt 1 ]; do
    sleep 1
    COUNT=`ps --no-heading -C java -f --width 1000 | grep "$JAR_NAME" | awk '{print $2}' | wc -l`
    if [ $COUNT -gt 0 ]; then
      break
    fi
  done
  PIDS=`ps --no-heading -C java -f --width 1000 | grep "$JAR_NAME" | awk '{print $2}'`
  echo "${JAR_NAME} Started and the PID is ${PIDS}."
  echo "You can check the log file in ${LOG_PATH} for details."
  
elif [ "$1" == "stop" ];then
  
  PIDS=`ps --no-heading -C java -f --width 1000 | grep $JAR_NAME | awk '{print $2}'`
  if [ -z "$PIDS" ]; then
    echo "ERROR:The $JAR_NAME does not started!"
    exit 1
  fi
echo -e "Stopping the $JAR_NAME..."
  
  for PID in $PIDS; do
    kill $PID > /dev/null 2>&1
  done
  
  COUNT=0
  while [ $COUNT -lt 1 ]; do
    sleep 1
    COUNT=1
    for PID in $PIDS ; do
      PID_EXIST=`ps --no-heading -p $PID`
      if [ -n "$PID_EXIST" ]; then
        COUNT=0
        break
      fi
    done
  done
  
  echo -e "${JAR_NAME} Stopped and the PID is ${PIDS}."
else
  echo_help
  exit 1
fi

```